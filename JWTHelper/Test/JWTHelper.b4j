AppType=JavaFX
Build1=Default,b4j.example
File1=Layout1.bjl
FileGroup1=Default Group
Group=Default Group
Library1=jcore
Library2=jfx
Library3=jxui
Library4=jwthelper
NumberOfFiles=1
NumberOfLibraries=4
NumberOfModules=0
Version=10.3
@EndOfDesignText@
#Region Project Attributes 
	#MainFormWidth: 600
	#MainFormHeight: 600 
#End Region

#AdditionalJar: hutool-all-5.8.43.jar

Sub Process_Globals
	Private fx As JFX
	Private MainForm As Form
	Private xui As XUI 
	Private Button1 As B4XView
	Dim SECRET As String = "my-secret-key-123456"
	Private Button2 As Button
	Dim jwt As JWTHelper
End Sub

Sub AppStart (Form1 As Form, Args() As String)
	MainForm = Form1
	MainForm.RootPane.LoadLayout("Layout1")
	MainForm.Show
	
	jwt.Initialize
End Sub

Sub Button1_Click
	

	
	Dim payload As Map
	payload.Initialize
	
	payload.put("userId", 1001)
	payload.put("username", "admin")
	payload.put("role", "ADMIN")

	Dim expireTime As Long = DateTime.Now + 3600000
	payload.put("exp", expireTime)
	
	Dim token As String = jwt.createToken(payload, SECRET)
	
	Log(token)
End Sub

Private Sub Button2_Click
	Dim token As String = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiQURNSU4iLCJleHAiOjE3NzA3NzM5MTg3NTksInVzZXJJZCI6MTAwMSwidXNlcm5hbWUiOiJhZG1pbiJ9.eCV45D9F_-oVoiJJBcL0VPSCuj_gTL32QnGHZMGQ-_k"
	Dim vr As Boolean = jwt.verify(token, SECRET)
	Log(vr)
	
	Dim userId As Object = jwt.GetPayload(token, "userId")
	Log("userId = " & userId)
	
	Dim username As Object = jwt.GetPayload(token, "username")
	Log("username = " & username)
End Sub